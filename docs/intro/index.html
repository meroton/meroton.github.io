<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title=" RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title=" Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title=" JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LVF8V72WEQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LVF8V72WEQ",{anonymize_ip:!0})</script><title data-react-helmet="true">Introduction | Meroton</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://meroton.github.io/docs/intro/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Introduction | Meroton"><meta data-react-helmet="true" name="description" content="xkcd.com"><meta data-react-helmet="true" property="og:description" content="xkcd.com"><link data-react-helmet="true" rel="icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://meroton.github.io/docs/intro/"><link data-react-helmet="true" rel="alternate" href="https://meroton.github.io/docs/intro/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://meroton.github.io/docs/intro/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c319aca5.css">
<link rel="preload" href="/assets/js/runtime~main.8d674480.js" as="script">
<link rel="preload" href="/assets/js/main.956d3e02.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Meroton" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Meroton" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Meroton</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro/">Documentation</a><a class="navbar__item navbar__link" href="/services/">Services</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://forms.gle/wchwDu6roWg6A7U29" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Sign up<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/theory/components-of-a-build/">Theory</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/tips/">Tips and Tricks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tips and Tricks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Introduction</h1><a href="https://xkcd.com/303/" target="_blank" rel="noopener noreferrer" title="&#x27;Are you stealing those LCDs?&#x27; &#x27;Yeah, but I&#x27;m doing it while my code compiles&#x27;"><figure><img alt="" src="/img/xkcd_compiling.png"><figcaption>xkcd.com</figcaption></figure></a><p>Compiling, and the tediousness of waiting for your compiles to be completed is probably as old as computing itself. Since <a href="https://en.wikipedia.org/wiki/Make_(software)" target="_blank" rel="noopener noreferrer">Make</a> was invented in 1976 we&#x27;ve learned a lot about how to make the computer build our code quickly and correctly. But our builds are often still slow.</p><p>Luckily, they don&#x27;t have to be. Slow builds are often a consequence of not fully specifying the dependencies and not taking advantage of the modern reality in which we live.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="so-how-do-we-solve-it">So, how do we solve it?<a class="hash-link" href="#so-how-do-we-solve-it" title="Direct link to heading">â€‹</a></h2><p>It&#x27;s simple, just follow these three steps:</p><ol><li>Make sure your dependency tree is specified</li><li>Utilize a centralized cache</li><li>Distribute your build actions</li></ol><p>Easy peasy. This will reduce your build time to the depth of your build tree, which even for the largest of projects shouldn&#x27;t be more than a few steps deep.</p><p>...</p><p>Why are you still here? Was there something unclear?</p><p>Ok, so while it is simple, it&#x27;s also quite difficult. But follow along and we&#x27;ll get you up and running.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="builds-outputs-actions-and-dependencies">Builds, outputs, actions and dependencies<a class="hash-link" href="#builds-outputs-actions-and-dependencies" title="Direct link to heading">â€‹</a></h2><p>A build has an output, for example executables, a set of resources to deploy to a server or a test result. To reach this output it has to perform a series of actions on your its inputs. The internal relationship between these inputs, actions and output can be described as a dependency tree<sup><a href="#note-1">1</a></sup>.</p><p>By structuring the dependency tree as a Merkle tree that incorporates all inputs, outputs and actions with a collision free hash function<sup><a href="#note-2">2</a></sup> we can mechanically structure actions into parallelizable work chunks where parts of the tree can short-circuited in case of unchanged inputs and/or outputs.</p><p>This will drastically reduce the amount of work required, especially in organizations where several developers work on the same code codebase, compilations done for one developer can be reused by other developers. And for most developers the build time will be reduced to simply compiling the changed files and linking them together. A build that can short-circuit and access a centralized build cache is probably the most performance increasing action you can do to speed up your build.</p><hr><p id="note-1">Note 1: Technically a directed acyclic graph</p><p id="note-2">Note 2: While there is no such thing as a collision free hash function, that doesn&#x27;t prevent us from using one anyway.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="clean-builds-and-its-evils">Clean builds and its evils<a class="hash-link" href="#clean-builds-and-its-evils" title="Direct link to heading">â€‹</a></h2><p>Have you ever heard someone say &#x27;Just run <code>make clean</code> first&#x27;? This problem in build systems is so common that most developers do not trust their incremental builds. The reason you have to run <code>make clean</code> is because the build system is not fully specified, this most often happens because some variable which your builds are dependent on (like a version of your build tool) is not specified in your dependency graph.</p><p>Using containers with well known versions of your dependencies and tools is a great best practice, that will not only reduce the risk of a phantom bug showing up for only a single developer but also prevent you from accidentally introducing a transient dependency into your build as well as greatly simplifying your developer onboarding process.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="deterministic-builds">Deterministic builds<a class="hash-link" href="#deterministic-builds" title="Direct link to heading">â€‹</a></h2><p>To get the most performance you also have to make sure that your builds are deterministic, i.e. given the same input they should produce the same output. This is pretty much always what you as a developer want, but due to events outside of your control this is not always what happens. One common issue is that the build tool adds a unique identifiers timestamps to your build.</p><p>This can often be configured away, but sometimes the best effort solution is to simply minimize non-determinism in your tools. As long as you are not depending on the output being non-deterministic, this will simply lead to performance degradation of your build which might not matter in the long run.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="remote-execution">Remote execution<a class="hash-link" href="#remote-execution" title="Direct link to heading">â€‹</a></h2><p>The final cherry on top of your efforts to speed up your build process will be remote execution. The <a href="https://github.com/bazelbuild/remote-apis/" target="_blank" rel="noopener noreferrer">Remote Execution API</a> is a standard for serializing arbitrary execution to be run on a different machine. While each developer might have a powerful machine, that machine is nothing compared to a dedicated build cluster that can be scaled independently of the developers machines. While a powerful developer machine might be able to run 16 parallel actions, a sufficiently large build cluster will allow you to run <em>all</em> of them.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="tooling-support">Tooling support<a class="hash-link" href="#tooling-support" title="Direct link to heading">â€‹</a></h2><p>The <a href="https://github.com/bazelbuild/remote-apis/" target="_blank" rel="noopener noreferrer">Remote Execution API</a> lists supported <a href="https://github.com/bazelbuild/remote-apis/#clients" target="_blank" rel="noopener noreferrer">clients</a> (build systems) and <a href="https://github.com/bazelbuild/remote-apis/#servers" target="_blank" rel="noopener noreferrer">servers</a>.</p><p>At Meroton, we specialize in <a href="https://bazel.build/" target="_blank" rel="noopener noreferrer">Bazel</a> as client and <a href="https://github.com/buildbarn/bb-deployments" target="_blank" rel="noopener noreferrer">Buildbarn</a> as server. Bazel is the open source version of Google&#x27;s internal Blaze build system. Buildbarn is an efficient open source implementation of the server side which is used at scale by several multinational corporations.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/meroton/docs/edit/main/docs/intro.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/theory/components-of-a-build/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Components of a Build</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#so-how-do-we-solve-it" class="table-of-contents__link toc-highlight">So, how do we solve it?</a></li><li><a href="#builds-outputs-actions-and-dependencies" class="table-of-contents__link toc-highlight">Builds, outputs, actions and dependencies</a></li><li><a href="#clean-builds-and-its-evils" class="table-of-contents__link toc-highlight">Clean builds and its evils</a></li><li><a href="#deterministic-builds" class="table-of-contents__link toc-highlight">Deterministic builds</a></li><li><a href="#remote-execution" class="table-of-contents__link toc-highlight">Remote execution</a></li><li><a href="#tooling-support" class="table-of-contents__link toc-highlight">Tooling support</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/theory/components-of-a-build/">Theory</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/services/">Services</a></li><li class="footer__item"><a class="footer__link-item" href="/contact/">Contact</a></li><li class="footer__item"><a href="https://forms.gle/wchwDu6roWg6A7U29" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Sign up<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Hosted build system</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/services/self-hosted/">Self hosted</a></li><li class="footer__item"><a class="footer__link-item" href="/services/cloud-environment/">Cloud based</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/meroton" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Meroton AB</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8d674480.js"></script>
<script src="/assets/js/main.956d3e02.js"></script>
</body>
</html>