<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-improved-chroot-in-buildbarn/reproducing-the-problem" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">VI Reproducing the Problem | Meroton</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://meroton.github.io/docs/improved-chroot-in-buildbarn/reproducing-the-problem/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="VI Reproducing the Problem | Meroton"><meta data-rh="true" name="description" content="This document explains how to reproduce the problem and try the patches"><meta data-rh="true" property="og:description" content="This document explains how to reproduce the problem and try the patches"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://meroton.github.io/docs/improved-chroot-in-buildbarn/reproducing-the-problem/"><link data-rh="true" rel="alternate" href="https://meroton.github.io/docs/improved-chroot-in-buildbarn/reproducing-the-problem/" hreflang="en"><link data-rh="true" rel="alternate" href="https://meroton.github.io/docs/improved-chroot-in-buildbarn/reproducing-the-problem/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title=" RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title=" Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title=" JSON Feed">



<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LVF8V72WEQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LVF8V72WEQ",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.08bb7386.css">
<script src="/assets/js/runtime~main.6deb3897.js" defer="defer"></script>
<script src="/assets/js/main.f54a0a71.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Meroton" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Meroton" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Meroton</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro/">Documentation</a><a class="navbar__item navbar__link" href="/services/">Services</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://forms.gle/wchwDu6roWg6A7U29" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Sign up<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/theory/components-of-a-build/">Theory</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/practice/rebase-and-reformat-git-branches-automatically/">Practice</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tips/">Tips and Tricks</a><button aria-label="Expand sidebar category &#x27;Tips and Tricks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/improved-chroot-in-buildbarn/">Improved chroot in Buildbarn</a><button aria-label="Collapse sidebar category &#x27;Improved chroot in Buildbarn&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/improved-chroot-in-buildbarn/chroot-in-buildbarn/">I Chroot in Buildbarn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/improved-chroot-in-buildbarn/the-problem-with-special-filesystems/">II The Problem with Special Mounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/improved-chroot-in-buildbarn/implementing-mountat/">III Implementing Mountat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/improved-chroot-in-buildbarn/implementing-unmountat/">IV Trying to Implement Unmountat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/improved-chroot-in-buildbarn/integrating-mountat/">V Integrating Mountat in Buildbarn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/improved-chroot-in-buildbarn/reproducing-the-problem/">VI Reproducing the Problem</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/improved-chroot-in-buildbarn/"><span itemprop="name">Improved chroot in Buildbarn</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">VI Reproducing the Problem</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Reproducing the Problem</h1>
<p>This document explains how to reproduce the problem and try the patches
while they are improved and submitted.
Once the pull requests are merged this will not be needed
and will stand just as another interesting technical rabbit hole.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="problem-statement-and-preliminaries">Problem statement and preliminaries<a href="#problem-statement-and-preliminaries" class="hash-link" aria-label="Direct link to Problem statement and preliminaries" title="Direct link to Problem statement and preliminaries">​</a></h2>
<p>The problem statement is simple:
programs that use <code>/proc</code> cannot run in <code>chroot</code>.
It should be easy to create a reproduction.</p>
<p>However, there are not publicly available programs that create a user-space input root.
This is something that <em>middleware</em> could do,
but requires a lot of code.</p>
<p>What options do we have?
Use the <code>go</code>-compiler, a <code>bash</code> script to call <code>ls /proc/self</code>, or compile a statically linked binary to do the same.
The <a href="https://github.com/bazelbuild/rules_go/" target="_blank" rel="noopener noreferrer">rules_go</a> toolchain builds a hermetic go compiler and sends that in the input root,
so it is a good candidate.
However it uses the system <code>gcc</code> to compile it.
And we get errors that <code>gcc</code> is not available.
An interpreted program like <code>bash</code> does not work either,
as we do not have the interpreter available.</p>
<p>Thankfully it is simple to create a statically linked <code>go</code> program.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go_binary(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pure = &quot;on&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And we can use the eminent <a href="https://docs.aspect.build/rules/aspect_bazel_lib/docs/run_binary/" target="_blank" rel="noopener noreferrer">run_binary</a> rule,
which does not require <code>bash</code> to execute a tool.
We use the compiled program directly as a source in the <code>tool</code> attribute.
If we were to use <code>native_binary</code> we get snagged up by a <code>bash</code> dependency
in its <code>CopyFile</code> action.</p>
<p>But with this we fail, here is the output from <code>bb-browser</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Command^*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Arguments:       ./ls-proc bazel-out/k8-fastbuild/bin/out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Environment variables: PATH=/bin:/usr/bin:/usr/local/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Status: Code 3: Failed to run command: Failed to start process: fork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          /exec /usr/bin/env: no such file or directory</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is because <code>Buildbarn</code> itself wraps the process with <code>/usr/bin/env</code>.
<a href="https://github.com/buildbarn/bb-remote-execution/blob/master/pkg/runner/local_runner_unix.go#L110" target="_blank" rel="noopener noreferrer">Here</a> <code>env</code> is used for PATH resolution before <code>chroot</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-yourself-an-usrbinenv-for-fun-and-profit">Build yourself an /usr/bin/env for fun and profit<a href="#build-yourself-an-usrbinenv-for-fun-and-profit" class="hash-link" aria-label="Direct link to Build yourself an /usr/bin/env for fun and profit" title="Direct link to Build yourself an /usr/bin/env for fun and profit">​</a></h2>
<p>Thankfully <code>busybox</code> has easy to use programs, that can help in a pinch,
especially the <code>musl</code> versions.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker run -v .:/out busybox:musl sh -c &quot;cp /usr/bin/env /out/env&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ file env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">env: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, stripped</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we just need to put it in the input root as <code>/usr/bin/env</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir -p usr/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ mv env usr/bin/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With the &quot;introspection&quot; target</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">run_binary(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = &quot;introspection&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outs = [&quot;out&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = [&quot;$(location out)&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    execution_requirements = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;no-cache&quot;: &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tool = &quot;:ls-proc&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    srcs = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # env is required in path resolution for chroot actions.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;usr/bin/env&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Not strictly needed, but symmetric with sys and proc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dev/dummy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Send a directory for /sys and /proc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Bazel wants a file for it to send the directory.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sys/dummy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;proc/dummy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This <code>introspection</code> target is <a href="https://github.com/stagnation/bb-deployments/commit/4bd72af1b75c3e75acdcd612396b352d1188e186" target="_blank" rel="noopener noreferrer">available to cherry-pick</a> for <code>bb-deployments</code>
where I bootstrap and test the functionality in <code>bb-remote-execution</code>.
See <a href="https://github.com/stagnation/bb-deployments/commits/feature/reproduce-bb-remote-execution-115/" target="_blank" rel="noopener noreferrer">this branch</a> for more.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-remotely">Build remotely<a href="#build-remotely" class="hash-link" aria-label="Direct link to Build remotely" title="Direct link to Build remotely">​</a></h2>
<p>With the customary <code>docker-compose</code> setup.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bazel build \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --remote_executor=grpc://localhost:8980 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --remote_instance_name=fuse \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --remote_default_exec_properties OSFamily=linux \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --remote_default_exec_properties container-image=&quot;docker://ghcr.io/catthehacker/ubuntu:act-22.04@sha256:5f9c35c25db1d51a8ddaae5c0ba8d3c163c5e9a4a6cc97acd409ac7eae239448&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @//:introspection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action details (uncached result): http://localhost:7984/fuse/blobs/sha256/historical_execute_response/598e3f5ad5548d7cbae6cb7918b0ce02c4dee92db0b8b11ab01835d9090ed33d-884/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024/03/26 15:14:24 Reading /proc/self:open /proc/self: no such file or directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Target //:introspection failed to build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This works with regular runners,
but not <code>chroot</code> runners.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="apply-the-patches">Apply the patches<a href="#apply-the-patches" class="hash-link" aria-label="Direct link to Apply the patches" title="Direct link to Apply the patches">​</a></h2>
<p>A setback! The docker-compose setup does not build the docker images,
so we would have to create deliverables from the pull requests,
which is tedious.
Instead we use the <code>bare</code> deployment
where we do compile the <code>runner</code> from source.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-pull-requests-are-applied-through-the-go_dependencies">The pull requests are applied through the go_dependencies<a href="#the-pull-requests-are-applied-through-the-go_dependencies" class="hash-link" aria-label="Direct link to The pull requests are applied through the go_dependencies" title="Direct link to The pull requests are applied through the go_dependencies">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">     go_repository(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         name = &quot;com_github_buildbarn_bb_remote_execution&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         importpath = &quot;github.com/buildbarn/bb-remote-execution&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-        sum = &quot;h1:BKoGfhCfn5IA4JRLMB7I4yHsM06fLvOc/zwzSxEuNrY=&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-        version = &quot;v0.0.0-20230905173453-70efb72857b0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+        remote = &quot;https://github.com/stagnation/bb-remote-execution&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+        vcs = &quot;git&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+        # Example for the documentation, check the code for the latest working commit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+        commit = &quot;2dfbdb8e3ac9675c70134bea97f4fb7b18c0de35&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bazel run \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --script_path launch-bare \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //bare</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and launch:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mktemp -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/tmp/tmp.sjR6aHjhni</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo launch-bare /tmp/tmp.sjR6aHjhni</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>We need sudo privileges for creating the special character devices.
Otherwise it fails when creating <code>/dev/random</code> in the input root.
We will also need <code>CAP_SYS_ADMIN</code> for <code>mount</code></p></div></div>
<p>Notice that we no longer use FUSE,
but for our reproduction that is okay.
In production use you <a href="/docs/improved-chroot-in-buildbarn/chroot-in-buildbarn/">do want FUSE</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="you-can-also-use-a-local-checkout-and-override-the-repository">You can also use a local checkout and override the repository<a href="#you-can-also-use-a-local-checkout-and-override-the-repository" class="hash-link" aria-label="Direct link to You can also use a local checkout and override the repository" title="Direct link to You can also use a local checkout and override the repository">​</a></h3>
<p>If you want to change the patches it is often easiest to use Bazel&#x27;s
<code>--override_repository</code> flag.
Just rebuild it with this command line
and the <code>go_module</code> does not matter.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bazel run \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --script_path launch-bare \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --override_repository com_github_buildbarn_bb_remote_execution=~/task/patching/bb-remote-execution \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //bare</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-reproduction-with-the-bare-deployment">Run the reproduction with the bare deployment<a href="#run-the-reproduction-with-the-bare-deployment" class="hash-link" aria-label="Direct link to Run the reproduction with the bare deployment" title="Direct link to Run the reproduction with the bare deployment">​</a></h2>
<p>We now build with the simpler bazel command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bazel build \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --remote_executor=grpc://localhost:8980 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --remote_instance_name=&quot;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  //:introspection</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that we no longer use FUSE,
but for our reproduction that is okay.
In production use you <a href="/docs/improved-chroot-in-buildbarn/chroot-in-buildbarn/">do want FUSE</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="successful-build">Successful build<a href="#successful-build" class="hash-link" aria-label="Direct link to Successful build" title="Direct link to Successful build">​</a></h3>
<p>This is the expected output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INFO: From RunBinary out:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">arch_status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">attr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autogroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auxv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clear_refs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmdline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">comm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">coredump_filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cpu_resctrl_groups</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cpuset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Target //:introspection up-to-date:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bazel-bin/out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO: Elapsed time: 0.306s, Critical Path: 0.03s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO: 2 processes: 1 internal, 1 remote.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFO: Build completed successfully, 2 total actions</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If it is not executed remotely run <code>bazel clean</code>.
Unfortunately the <code>no-cache</code> tag does not work here.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/meroton/docs/edit/main/docs/improved-chroot-in-buildbarn/reproducing-the-problem.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/improved-chroot-in-buildbarn/integrating-mountat/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">V Integrating Mountat in Buildbarn</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problem-statement-and-preliminaries" class="table-of-contents__link toc-highlight">Problem statement and preliminaries</a></li><li><a href="#build-yourself-an-usrbinenv-for-fun-and-profit" class="table-of-contents__link toc-highlight">Build yourself an /usr/bin/env for fun and profit</a></li><li><a href="#build-remotely" class="table-of-contents__link toc-highlight">Build remotely</a></li><li><a href="#apply-the-patches" class="table-of-contents__link toc-highlight">Apply the patches</a><ul><li><a href="#the-pull-requests-are-applied-through-the-go_dependencies" class="table-of-contents__link toc-highlight">The pull requests are applied through the go_dependencies</a></li><li><a href="#you-can-also-use-a-local-checkout-and-override-the-repository" class="table-of-contents__link toc-highlight">You can also use a local checkout and override the repository</a></li></ul></li><li><a href="#run-the-reproduction-with-the-bare-deployment" class="table-of-contents__link toc-highlight">Run the reproduction with the bare deployment</a><ul><li><a href="#successful-build" class="table-of-contents__link toc-highlight">Successful build</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/theory/components-of-a-build/">Theory</a></li></ul></div><div class="col footer__col"><div class="footer__title">About Us</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/services/">Services</a></li><li class="footer__item"><a class="footer__link-item" href="/contact/">Contact</a></li><li class="footer__item"><a href="https://forms.gle/wchwDu6roWg6A7U29" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sign up<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Hosted build system</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/services/self-hosted/">Self hosted</a></li><li class="footer__item"><a class="footer__link-item" href="/services/cloud-environment/">Cloud based</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/bug-bounty/">Bug bounty</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-policy/">Privacy Policy</a></li><li class="footer__item"><a href="https://github.com/meroton" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Meroton AB</div></div></div></footer></div>
</body>
</html>